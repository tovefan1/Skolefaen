<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Math Class Countdown</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #f5f5f5;
    color: #333;
    padding: 20px;
  }
  h1 {
    text-align: center;
  }
  .class-container {
    max-width: 600px;
    margin: 20px auto;
    background: #fff;
    border-radius: 10px;
    padding: 15px 20px;
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
  }
  .class-item {
    border-bottom: 1px solid #ddd;
    padding: 10px 0;
  }
  .class-item:last-child {
    border-bottom: none;
  }
  .class-name {
    font-weight: bold;
  }
  .countdown {
    font-size: 1.2em;
    margin-top: 5px;
    color: #0077cc;
  }
  .completed {
    color: #888;
  }
</style>
</head>
<body>
<h1>Math Class Countdown</h1>
<div class="class-container" id="classes"></div>

<script>
// List of class dates (DD.MM.YY) and weekdays
const classDates = [
  { date: "09.02.26", day: "Monday" },
  { date: "10.02.26", day: "Tuesday" },
  { date: "12.02.26", day: "Thursday" },
  { date: "23.02.26", day: "Monday" },
  { date: "24.02.26", day: "Tuesday" },
  { date: "26.02.26", day: "Thursday" },
  { date: "02.03.26", day: "Monday" },
  { date: "03.03.26", day: "Tuesday" },
  { date: "05.03.26", day: "Thursday" },
  { date: "09.03.26", day: "Monday" },
  { date: "10.03.26", day: "Tuesday" },
  { date: "12.03.26", day: "Thursday" },
  { date: "16.03.26", day: "Monday" },
  { date: "17.03.26", day: "Tuesday" },
  { date: "19.03.26", day: "Thursday" },
  { date: "26.03.26", day: "Thursday" },
  { date: "07.04.26", day: "Tuesday" },
  { date: "09.04.26", day: "Thursday" },
  { date: "13.04.26", day: "Monday" },
  { date: "14.04.26", day: "Tuesday" },
  { date: "16.04.26", day: "Thursday" },
  { date: "20.04.26", day: "Monday" },
  { date: "21.04.26", day: "Tuesday" },
  { date: "23.04.26", day: "Thursday" },
  { date: "27.04.26", day: "Monday" },
  { date: "28.04.26", day: "Tuesday" },
  { date: "30.04.26", day: "Thursday" },
  { date: "04.05.26", day: "Monday" },
  { date: "05.05.26", day: "Tuesday" },
  { date: "07.05.26", day: "Thursday" },
  { date: "11.05.26", day: "Monday" },
  { date: "12.05.26", day: "Tuesday" },
  { date: "18.05.26", day: "Monday" },
  { date: "19.05.26", day: "Tuesday" },
  { date: "28.05.26", day: "Thursday" },
  { date: "01.06.26", day: "Monday" },
  { date: "02.06.26", day: "Tuesday" },
  { date: "08.06.26", day: "Monday" },
  { date: "09.06.26", day: "Tuesday" },
  { date: "11.06.26", day: "Thursday" },
  { date: "15.06.26", day: "Monday" },
  { date: "16.06.26", day: "Tuesday" },
];

// Map weekdays to start/end times
const schedule = {
  "Monday": { start: "08:30", end: "09:15" },
  "Tuesday": { start: "10:15", end: "11:00" },
  "Thursday": { start: "12:15", end: "14:00", recessStart: "13:00", recessEnd: "13:15" }
};

// Convert DD.MM.YY + HH:MM to Date object
function parseDate(dateStr, timeStr) {
  const [day, month, year] = dateStr.split(".").map(Number);
  const [hour, minute] = timeStr.split(":").map(Number);
  return new Date(2000 + year, month - 1, day, hour, minute);
}

// Generate class elements
const container = document.getElementById("classes");
classDates.forEach((c, idx) => {
  const div = document.createElement("div");
  div.classList.add("class-item");
  div.innerHTML = `<div class="class-name">Class on ${c.date} (${c.day})</div>
                   <div class="countdown" id="countdown-${idx}"></div>`;
  container.appendChild(div);
});

// Update countdowns every second
function updateCountdown() {
  const now = new Date();
  classDates.forEach((c, idx) => {
    const times = schedule[c.day];
    if (!times) return;
    let countdownEl = document.getElementById(`countdown-${idx}`);
    let start = parseDate(c.date, times.start);
    let end = parseDate(c.date, times.end);

    // Handle Thursday recess
    let inRecess = false;
    if (c.day === "Thursday" && times.recessStart && times.recessEnd) {
      let recessStart = parseDate(c.date, times.recessStart);
      let recessEnd = parseDate(c.date, times.recessEnd);
      if (now >= recessStart && now < recessEnd) inRecess = true;
    }

    let text = "";
    if (now < start) {
      // Class not started
      let diff = start - now;
      text = `Starts in ${formatTime(diff)}`;
    } else if (now >= start && now < end) {
      // Class in progress
      if (inRecess) {
        text = `Recess (paused)`;
      } else {
        let diff = end - now;
        text = `Ends in ${formatTime(diff)}`;
      }
    } else {
      // Class ended
      text = "Completed";
    }
    countdownEl.textContent = text;
  });
}

function formatTime(ms) {
  let totalSeconds = Math.floor(ms / 1000);
  let hours = Math.floor(totalSeconds / 3600);
  totalSeconds %= 3600;
  let minutes = Math.floor(totalSeconds / 60);
  let seconds = totalSeconds % 60;
  return `${hours>0?hours+"h ":""}${minutes}m ${seconds}s`;
}

setInterval(updateCountdown, 1000);
updateCountdown();
</script>
</body>
</html>
